<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>sqlingvo.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/app.klipse.tech/css/codemirror.css" /><div style="visibility: hidden;"><div class="klipse" data-external-libs="">(refer-clojure :exclude '[distinct group-by update])
                                                                (require '[clojure.string :as s]
                                                                         '[sqlingvo.core :as c :refer [db sql select from where copy as group-by having insert intersect join refresh-materialized-view update returning truncate union values drop-table except ast delete explain drop-materialized-view]]
                                                                         '[sqlingvo.util :as util])
                                  
                                                                (def db (db :mysql))

</div></div><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Sqlingvo</span> <span class="project-version">0.9.1-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sqlingvo</span></div></div></li><li class="depth-2 branch"><a href="sqlingvo.compiler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compiler</span></div></a></li><li class="depth-2 branch current"><a href="sqlingvo.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="sqlingvo.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-2 branch"><a href="sqlingvo.expr.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>expr</span></div></a></li><li class="depth-2 branch"><a href="sqlingvo.url.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>url</span></div></a></li><li class="depth-2"><a href="sqlingvo.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="sqlingvo.core.html#var-as"><div class="inner"><span>as</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-asc"><div class="inner"><span>asc</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-ast"><div class="inner"><span>ast</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-cascade"><div class="inner"><span>cascade</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-chain-state"><div class="inner"><span>chain-state</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-check"><div class="inner"><span>check</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-column"><div class="inner"><span>column</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-compose"><div class="inner"><span>compose</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-concurrently"><div class="inner"><span>concurrently</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-continue-identity"><div class="inner"><span>continue-identity</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-copy"><div class="inner"><span>copy</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-create-table"><div class="inner"><span>create-table</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-db"><div class="inner"><span>db</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-db.3F"><div class="inner"><span>db?</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-delete"><div class="inner"><span>delete</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-delimiter"><div class="inner"><span>delimiter</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-desc"><div class="inner"><span>desc</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-distinct"><div class="inner"><span>distinct</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-do-constraint"><div class="inner"><span>do-constraint</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-do-nothing"><div class="inner"><span>do-nothing</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-do-update"><div class="inner"><span>do-update</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-drop-materialized-view"><div class="inner"><span>drop-materialized-view</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-drop-table"><div class="inner"><span>drop-table</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-encoding"><div class="inner"><span>encoding</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-except"><div class="inner"><span>except</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-explain"><div class="inner"><span>explain</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-from"><div class="inner"><span>from</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-group-by"><div class="inner"><span>group-by</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-having"><div class="inner"><span>having</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-if-exists"><div class="inner"><span>if-exists</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-if-not-exists"><div class="inner"><span>if-not-exists</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-inherits"><div class="inner"><span>inherits</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-insert"><div class="inner"><span>insert</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-intersect"><div class="inner"><span>intersect</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-join"><div class="inner"><span>join</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-like"><div class="inner"><span>like</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-limit"><div class="inner"><span>limit</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-nulls"><div class="inner"><span>nulls</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-offset"><div class="inner"><span>offset</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-on-conflict"><div class="inner"><span>on-conflict</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-on-conflict-on-constraint"><div class="inner"><span>on-conflict-on-constraint</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-order-by"><div class="inner"><span>order-by</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-primary-key"><div class="inner"><span>primary-key</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-refresh-materialized-view"><div class="inner"><span>refresh-materialized-view</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-restart-identity"><div class="inner"><span>restart-identity</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-restrict"><div class="inner"><span>restrict</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-returning"><div class="inner"><span>returning</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-select"><div class="inner"><span>select</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-sql"><div class="inner"><span>sql</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-temporary"><div class="inner"><span>temporary</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-truncate"><div class="inner"><span>truncate</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-union"><div class="inner"><span>union</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-update"><div class="inner"><span>update</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-values"><div class="inner"><span>values</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-where"><div class="inner"><span>where</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-window"><div class="inner"><span>window</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-with"><div class="inner"><span>with</span></div></a></li><li class="depth-1"><a href="sqlingvo.core.html#var-with-data"><div class="inner"><span>with-data</span></div></a></li></ul></div><div class="namespace-docs" id="content"><p id="klipse-loader-wrapper">Click <a id="klipse-loader" href="javascript:void(0)">here</a> to make these examples interactive with ClojureScript.</p><h1 class="anchor" id="top">sqlingvo.core</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-as"><h3>as</h3><div class="usage"><code>(as expr alias &amp; [columns])</code></div><div class="doc"><div class="markdown"><p>Parse <code>expr</code> and return an expr with and AS clause using <code>alias</code>.</p></div></div></div><div class="public anchor" id="var-asc"><h3>asc</h3><div class="usage"><code>(asc expr)</code></div><div class="doc"><div class="markdown"><p>Parse <code>expr</code> and return an ORDER BY expr using ascending order.</p></div></div></div><div class="public anchor" id="var-ast"><h3>ast</h3><div class="usage"><code>(ast stmt)</code></div><div class="doc"><div class="markdown"><p>Returns the abstract syntax tree of <code>stmt</code>.</p></div></div></div><div class="public anchor" id="var-cascade"><h3>cascade</h3><div class="usage"><code>(cascade condition)</code></div><div class="doc"><div class="markdown"><p>Add a CASCADE clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-chain-state"><h3>chain-state</h3><div class="usage"><code>(chain-state body)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-check"><h3>check</h3><div class="usage"><code>(check expr)</code></div><div class="doc"><div class="markdown"><p>Add a CHECK clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-column"><h3>column</h3><div class="usage"><code>(column name type &amp; {:as options})</code></div><div class="doc"><div class="markdown"><p>Add a column to <code>stmt</code>.</p></div></div></div><div class="public anchor" id="var-compose"><h3>compose</h3><div class="usage"><code>(compose stmt &amp; body)</code></div><div class="doc"><div class="markdown"><p>Compose multiple SQL statements.</p></div></div></div><div class="public anchor" id="var-concurrently"><h3>concurrently</h3><div class="usage"><code>(concurrently condition)</code></div><div class="doc"><div class="markdown"><p>Add a CONCURRENTLY clause to a SQL statement.</p></div></div></div><div class="public anchor" id="var-continue-identity"><h3>continue-identity</h3><div class="usage"><code>(continue-identity condition)</code></div><div class="doc"><div class="markdown"><p>Add a CONTINUE IDENTITY clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-copy"><h3>copy</h3><div class="usage"><code>(copy db table columns &amp; body)</code></div><div class="doc"><div class="markdown"><p>Build a COPY statement.</p>
<p>Examples:</p>
<pre><code>(copy db :country []
  (from :stdin))
</code></pre>
<p>Another example:</p>
<pre><code>(copy db :country []
  (from "/usr1/proj/bray/sql/country_data"))
</code></pre></div></div></div><div class="public anchor" id="var-create-table"><h3>create-table</h3><div class="usage"><code>(create-table db table &amp; body)</code></div><div class="doc"><div class="markdown"><p>Build a CREATE TABLE statement.</p></div></div></div><div class="public anchor" id="var-db"><h3>db</h3><div class="usage"><code>(db spec &amp; [opts])</code></div><div class="doc"><div class="markdown"><p>Return a new database for <code>spec</code>.</p></div></div></div><div class="public anchor" id="var-db.3F"><h3>db?</h3><div class="usage"><code>(db? x)</code></div><div class="doc"><div class="markdown"><p>Return true if <code>x</code> is a database, otherwise false.</p></div></div></div><div class="public anchor" id="var-delete"><h3>delete</h3><div class="usage"><code>(delete db table &amp; body)</code></div><div class="doc"><div class="markdown"><p>Build a DELETE statement.</p>
<p>Examples:</p>
<pre><code>(delete db :continents)
</code></pre>
<p>Another example:</p>
<pre><code>(delete db :continents
  (where '(= :id 1)))
</code></pre></div></div></div><div class="public anchor" id="var-delimiter"><h3>delimiter</h3><div class="usage"><code>(delimiter delimiter)</code></div><div class="doc"><div class="markdown"><p>Add a DELIMITER clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-desc"><h3>desc</h3><div class="usage"><code>(desc expr)</code></div><div class="doc"><div class="markdown"><p>Parse <code>expr</code> and return an ORDER BY expr using descending order.</p></div></div></div><div class="public anchor" id="var-distinct"><h3>distinct</h3><div class="usage"><code>(distinct exprs &amp; {:keys [on]})</code></div><div class="doc"><div class="markdown"><p>Parse <code>exprs</code> and return a DISTINCT clause.</p></div></div></div><div class="public anchor" id="var-do-constraint"><h3>do-constraint</h3><div class="usage"><code>(do-constraint constraint)</code></div><div class="doc"><div class="markdown"><p>Add a DO CONSTRAINT clause to a SQL statement.</p></div></div></div><div class="public anchor" id="var-do-nothing"><h3>do-nothing</h3><div class="usage"><code>(do-nothing)</code></div><div class="doc"><div class="markdown"><p>Add a DO NOTHING clause to a SQL statement.</p></div></div></div><div class="public anchor" id="var-do-update"><h3>do-update</h3><div class="usage"><code>(do-update expr)</code></div><div class="doc"><div class="markdown"><p>Add a DO UPDATE clause to a SQL statement.</p></div></div></div><div class="public anchor" id="var-drop-materialized-view"><h3>drop-materialized-view</h3><div class="usage"><code>(drop-materialized-view db view &amp; body)</code></div><div class="doc"><div class="markdown"><p>Build a DROP MATERIALIZED VIEW statement.</p>
<p>Examples:</p>
<p>(drop-materialized-view db :order-summary)</p></div></div></div><div class="public anchor" id="var-drop-table"><h3>drop-table</h3><div class="usage"><code>(drop-table db tables &amp; body)</code></div><div class="doc"><div class="markdown"><p>Build a DROP TABLE statement.</p>
<p>Examples:</p>
<pre><code>(drop-table db [:continents])
</code></pre>
<p>Another example:</p>
<pre><code>(drop-table db [:continents :countries])
</code></pre></div></div></div><div class="public anchor" id="var-encoding"><h3>encoding</h3><div class="usage"><code>(encoding encoding)</code></div><div class="doc"><div class="markdown"><p>Add a ENCODING clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-except"><h3>except</h3><div class="usage"><code>(except &amp; args)</code></div><div class="doc"><div class="markdown"><p>Build an EXCEPT statement.</p>
<p>Examples:</p>
<pre><code>(except
 (select db [1])
 (select db [2]))
</code></pre>
<p>Another example:</p>
<pre><code>(except
 {:all true}
 (select db [1])
 (select db [2]))
</code></pre></div></div></div><div class="public anchor" id="var-explain"><h3>explain</h3><div class="usage"><code>(explain db stmt &amp; [opts])</code></div><div class="doc"><div class="markdown"><p>Return an EXPLAIN statement for <code>stmt</code>. <code>opts</code> can be a map with  the following key/value pairs:</p>
<ul>
  <li>:analyze boolean</li>
  <li>:buffers boolean</li>
  <li>:costs boolean</li>
  <li>:format :json, :text, :yaml, :xml</li>
  <li>:timing boolean</li>
  <li>:verbose boolean</li>
</ul>
<p>Examples:</p>
<pre><code>(explain db
  (select db [:*]
    (from :foo)))
</code></pre>
<p>With <code>analyze</code>:</p>
<pre><code>(explain db
  (select db [:*]
    (from :foo))
  {:analyze true})
</code></pre></div></div></div><div class="public anchor" id="var-from"><h3>from</h3><div class="usage"><code>(from &amp; from)</code></div><div class="doc"><div class="markdown"><p>Add a FROM clause to an SQL statement. The <code>from</code> forms can be one  or more tables, :stdin, a filename or an other sub query.</p>
<p>Examples:</p>
<p>Simple select:</p>
<pre><code>  (select db [:*]
    (from :continents))
</code></pre>
<p>Using <code>where</code>:</p>
<pre><code>  (select db [:*]
    (from :continents :countries)
    (where '(= :continents.id :continent-id)))
</code></pre>
<p>Using <code>as</code>:</p>
<pre><code>  (select db [:*]
    (from (as (select [1 2 3]) :x)))
</code></pre>
<p>Using <code>copy</code>:</p>
<pre><code>  (copy db :country []
    (from :stdin))
</code></pre>
<p>Using <code>copy</code>:</p>
<pre><code>  (copy db :country []
    (from "/usr1/proj/bray/sql/country_data"))
</code></pre></div></div></div><div class="public anchor" id="var-group-by"><h3>group-by</h3><div class="usage"><code>(group-by &amp; exprs)</code></div><div class="doc"><div class="markdown"><p>Add a GROUP BY clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-having"><h3>having</h3><div class="usage"><code>(having condition &amp; [combine])</code></div><div class="doc"><div class="markdown"><p>Add a HAVING clause to an SQL statement.</p>
<p>Examples:</p>
<p>(select db [:city ‘(max :temp-lo)]  (from :weather)  (group-by :city)  (having ’(&lt; (max :temp-lo) 40)))</p></div></div></div><div class="public anchor" id="var-if-exists"><h3>if-exists</h3><div class="usage"><code>(if-exists condition)</code></div><div class="doc"><div class="markdown"><p>Add a IF EXISTS clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-if-not-exists"><h3>if-not-exists</h3><div class="usage"><code>(if-not-exists condition)</code></div><div class="doc"><div class="markdown"><p>Add a IF EXISTS clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-inherits"><h3>inherits</h3><div class="usage"><code>(inherits &amp; tables)</code></div><div class="doc"><div class="markdown"><p>Add an INHERITS clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-insert"><h3>insert</h3><div class="usage"><code>(insert db table columns &amp; body)</code></div><div class="doc"><div class="markdown"><p>Build a INSERT statement.</p></div></div></div><div class="public anchor" id="var-intersect"><h3>intersect</h3><div class="usage"><code>(intersect &amp; args)</code></div><div class="doc"><div class="markdown"><p>Build an INTERSECT statement.</p>
<p>Examples:</p>
<pre><code> (intersect
  (select db [1])
  (select db [2]))
</code></pre>
<p>Another example:</p>
<pre><code> (intersect
  {:all true}
  (select db [1])
  (select db [2]))
</code></pre></div></div></div><div class="public anchor" id="var-join"><h3>join</h3><div class="usage"><code>(join from condition &amp; {:keys [type outer pk]})</code></div><div class="doc"><div class="markdown"><p>Add a JOIN clause to a statement.</p>
<p>Examples:</p>
<p>First:</p>
<pre><code>(select db [:*]
  (from :countries)
  (join :continents '(using :id)))
</code></pre>
<p>Second:</p>
<pre><code>(select db [:*]
  (from :continents)
  (join :countries.continent-id :continents.id))
</code></pre>
<p>Third:</p>
<pre><code>(select db [:*]
  (from :countries)
  (join :continents '(on (= :continents.id :countries.continent-id))))
</code></pre></div></div></div><div class="public anchor" id="var-like"><h3>like</h3><div class="usage"><code>(like table &amp; {:as opts})</code></div><div class="doc"><div class="markdown"><p>Add a LIKE clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-limit"><h3>limit</h3><div class="usage"><code>(limit expr)</code></div><div class="doc"><div class="markdown"><p>Add a LIMIT clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-nulls"><h3>nulls</h3><div class="usage"><code>(nulls expr where)</code></div><div class="doc"><div class="markdown"><p>Parse <code>expr</code> and return an NULLS FIRST/LAST expr.</p></div></div></div><div class="public anchor" id="var-offset"><h3>offset</h3><div class="usage"><code>(offset expr)</code></div><div class="doc"><div class="markdown"><p>Add a OFFSET clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-on-conflict"><h3>on-conflict</h3><div class="usage"><code>(on-conflict target &amp; body)</code></div><div class="doc"><div class="markdown"><p>Add a ON CONFLICT clause to a SQL statement.</p></div></div></div><div class="public anchor" id="var-on-conflict-on-constraint"><h3>on-conflict-on-constraint</h3><div class="usage"><code>(on-conflict-on-constraint target &amp; body)</code></div><div class="doc"><div class="markdown"><p>Add a ON CONFLICT ON CONSTRAINT clause to a SQL statement.</p></div></div></div><div class="public anchor" id="var-order-by"><h3>order-by</h3><div class="usage"><code>(order-by &amp; exprs)</code></div><div class="doc"><div class="markdown"><p>Add a ORDER BY clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-primary-key"><h3>primary-key</h3><div class="usage"><code>(primary-key &amp; keys)</code></div><div class="doc"><div class="markdown"><p>Add a PRIMARY KEY clause to a table.</p></div></div></div><div class="public anchor" id="var-refresh-materialized-view"><h3>refresh-materialized-view</h3><div class="usage"><code>(refresh-materialized-view db view &amp; body)</code></div><div class="doc"><div class="markdown"><p>Build a REFRESH MATERIALIZED VIEW statement.</p>
<p>Examples:</p>
<p>(refresh-materialized-view db :order-summary)</p></div></div></div><div class="public anchor" id="var-restart-identity"><h3>restart-identity</h3><div class="usage"><code>(restart-identity condition)</code></div><div class="doc"><div class="markdown"><p>Add a RESTART IDENTITY clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-restrict"><h3>restrict</h3><div class="usage"><code>(restrict condition)</code></div><div class="doc"><div class="markdown"><p>Add a RESTRICT clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-returning"><h3>returning</h3><div class="usage"><code>(returning &amp; exprs)</code></div><div class="doc"><div class="markdown"><p>Add a RETURNING clause to an SQL statement.</p>
<p>Examples:</p>
<pre><code>(insert db :distributors []
  (values [{:did 106 :dname "XYZ Widgets"}])
  (returning :*))
</code></pre>
<p>Another example:</p>
<pre><code>(update db :films
  {:kind "Dramatic"}
  (where '(= :kind "Drama"))
  (returning :*))
</code></pre></div></div></div><div class="public anchor" id="var-select"><h3>select</h3><div class="usage"><code>(select db exprs &amp; body)</code></div><div class="doc"><div class="markdown"><p>Build a SELECT statement.</p>
<p>Examples:</p>
<pre><code>(select db [1])
</code></pre>
<p>All the columns:</p>
<pre><code>(select db [:*]
  (from :continents))
</code></pre>
<p>Only <code>id</code> and <code>name</code>:</p>
<pre><code>(select db [:id :name]
  (from :continents))
</code></pre></div></div></div><div class="public anchor" id="var-sql"><h3>sql</h3><div class="usage"><code>(sql stmt)</code></div><div class="doc"><div class="markdown"><p>Compile <code>stmt</code> into a clojure.java.jdbc compatible vector.</p></div></div></div><div class="public anchor" id="var-temporary"><h3>temporary</h3><div class="usage"><code>(temporary condition)</code></div><div class="doc"><div class="markdown"><p>Add a TEMPORARY clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-truncate"><h3>truncate</h3><div class="usage"><code>(truncate db tables &amp; body)</code></div><div class="doc"><div class="markdown"><p>Build a TRUNCATE statement.</p>
<p>Examples:</p>
<pre><code>(truncate db [:continents])
</code></pre>
<p>Another example:</p>
<pre><code>(truncate db [:continents :countries])
</code></pre></div></div></div><div class="public anchor" id="var-union"><h3>union</h3><div class="usage"><code>(union &amp; args)</code></div><div class="doc"><div class="markdown"><p>Build a UNION statement.</p>
<p>Examples:</p>
<pre><code> (union
  (select db [1])
  (select db [2]))
</code></pre>
<p>Another example:</p>
<pre><code> (union
  {:all true}
  (select db [1])
  (select db [2]))
</code></pre></div></div></div><div class="public anchor" id="var-update"><h3>update</h3><div class="usage"><code>(update db table row &amp; body)</code></div><div class="doc"><div class="markdown"><p>Build a UPDATE statement.</p>
<p>Examples:</p>
<p>(update db :films {:kind “Dramatic”}  (where ’(= :kind “Drama”)))</p></div></div></div><div class="public anchor" id="var-values"><h3>values</h3><div class="usage"><code>(values vals)</code><code>(values db vals)</code></div><div class="doc"><div class="markdown"><p>Return a VALUES statement or clause.</p>
<p>Examples:</p>
<pre><code>(values db [[1 "one"] [2 "two"] [3 "three"]])
</code></pre>
<p>With insert:</p>
<pre><code>(insert db :distributors []
  (values [{:did 106 :dname "XYZ Widgets"}]))
</code></pre></div></div></div><div class="public anchor" id="var-where"><h3>where</h3><div class="usage"><code>(where condition &amp; [combine])</code></div><div class="doc"><div class="markdown"><p>Add a WHERE clause to an SQL statement.</p>
<p>Examples:</p>
<pre><code>(select db [1]
  (where '(in 1 (1 2 3))))
</code></pre>
<p>Another example:</p>
<pre><code>(select db [*]
  (from :continents)
  (where '(= :name "Europe")))
</code></pre>
<p>Another example:</p>
<pre><code>(delete db :continents
  (where '(= :id 1)))
</code></pre></div></div></div><div class="public anchor" id="var-window"><h3>window</h3><div class="usage"><code>(window &amp; exprs)</code></div><div class="doc"><div class="markdown"><p>Add a WINDOW clause to an SQL statement.</p></div></div></div><div class="public anchor" id="var-with"><h3>with</h3><div class="usage"><code>(with db bindings query)</code></div><div class="doc"><div class="markdown"><p>Build a WITH (common table expressions) query.</p></div></div></div><div class="public anchor" id="var-with-data"><h3>with-data</h3><div class="usage"><code>(with-data data?)</code></div><div class="doc"><div class="markdown"><p>Add a WITH [NO] DATA clause to a SQL statement.</p></div></div></div></div><script>window.klipse_settings = {
    selector: '.klipse,.clojure',
    codemirror_options_in: {
    lineWrapping: true,
    autoCloseBrackets: true
    },
    codemirror_options_out: {
    lineWrapping: true
    },
    clojure_cached_macro_ns_regexp:/sqlingvo\..*/,
    clojure_cached_ns_regexp:/sqlingvo\..*|no\.en\..*/,
    cached_ns_root:'./cache-cljs',
    };</script><script>
    function klipseLocalStorageEnabled() {
        var mod = 'modernizr';
        try {
          localStorage.setItem(mod, mod);
          localStorage.removeItem(mod);
          return true;
        } catch (e) {
          return false;
        }
     }
     function klipseLoad() {
      if (klipseLocalStorageEnabled()) { sessionStorage.setItem('klipse', true);}
      $('#klipse-loader-wrapper').remove();
      var s = document.createElement('script');
      s.setAttribute('src','https://storage.googleapis.com/app.klipse.tech/plugin/js/klipse_plugin.js');
      document.head.appendChild(s);
      }
    if(!false) {
      klipseLoad();
    } else {
      if((klipseLocalStorageEnabled() && sessionStorage.getItem('klipse')) || window.location.search.match(/klipse=1/)) {
        klipseLoad();
      } else {
        $('#klipse-loader').click(function(){
        klipseLoad();
       });
      }
    }
    </script></body></html>